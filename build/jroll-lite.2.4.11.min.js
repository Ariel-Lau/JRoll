/*! JRoll-Lite v2.4.11 ~ (c) 2017 Author:BarZu Git:https://github.com/chjtx/JRoll/blob/master/README-LITE.md */
!function(t,e,o){"use strict";function r(t){var e=p.findScroller(t.target);c.jrollActive&&t.touches&&t.touches.length>1||e&&(e.moving&&(t.preventDefault(),e._endAction()),c.jrollActive=e,c.jrollActive._start(t))}function l(t){if(c.jrollActive){var o=e.activeElement;c.jrollActive.options.preventDefault&&t.preventDefault(),!c.jrollActive.options.autoBlur||"INPUT"!==o.tagName&&"TEXTAREA"!==o.tagName||o.blur(),c.jrollActive._move(t)}}function n(t){c.jrollActive&&c.jrollActive._end(t)}function s(){setTimeout(function(){for(var t in d)d[t].refresh().scrollTo(0,d[t].y,200)},600)}function i(t,o){e.addEventListener(t,o,!!f&&{passive:!1})}var c,a=t.requestAnimationFrame||t.webkitRequestAnimationFrame,d={},u="transform"in e.createElement("div").style?"t":"webkitT",p={TSF:u+"ransform",TSD:u+"ransitionDuration",moveTo:function(t,e,o,r,l){function n(){u-=17,u<=0?(s=e,i=o):(s=parseInt(s+c,10),i=parseInt(i+d,10)),t.style[p.TSF]="translate3d("+s+"px, "+i+"px, 0px)",u>0&&(s!==e||i!==o)?a(n):"function"==typeof l&&l()}var s,i,c,d,u,f,m=0,h=0;f=/translate3d\(([-\d.]+)px, ([-\d.]+)px, 0px\)/.exec(t.style[p.TSF]),f&&(m=Number(f[1]),h=Number(f[2])),u=r||17,c=(e-m)/(u/17),d=(o-h)/(u/17),s=m,i=h,n()},findScroller:function(t){for(var o;t!==e;){if(o=t.getAttribute("jroll-id"))return d[o];t=t.parentNode}return null}},f=!1;try{var m=Object.defineProperty({},"passive",{get:function(){f=!0}});t.addEventListener("test",null,m)}catch(h){}i("touchstart",r),i("touchmove",l),i("touchend",n),i("touchcancel",n),t.addEventListener("resize",s),t.addEventListener("orientationchange",s),c=function(t,o){var r=this;return r.wrapper="string"==typeof t?e.querySelector(t):t,r.w=r.wrapper,r.scroller=o&&o.scroller?"string"==typeof o.scroller?e.querySelector(o.scroller):o.scroller:r.w.children[0],r.s=r.scroller,r.s.jroll?(r.s.jroll.refresh(),r.s.jroll):(r.s.jroll=r,void this._init(t,o))},c.version="2.4.11",c.utils=p,c.jrollMap=d,c.prototype={_init:function(e,r){var l=this;l.id=r&&r.id||l.s.getAttribute("jroll-id")||"jroll_"+o.random().toString().substr(2,8),l.s.setAttribute("jroll-id",l.id),d[l.id]=l,l.options={min:null,max:null,scrollX:!1,bounce:!0,scrollBar:!1,scrollBarFade:!1,preventDefault:!0,momentum:!0,autoStyle:!0,autoBlur:!0},l.o=l.options;for(var n in r)"scroller"!==n&&(l.o[n]=r[n]);l.o.autoStyle&&("static"===t.getComputedStyle(l.w).position&&(l.w.style.position="relative",l.w.style.top="0",l.w.style.left="0"),l.w.style.overflow="hidden",l.s.style.minHeight="100%"),l.s.style.touchAction="none",l.y=0,l.scrollBar=null,l._s={start:0,last:0,end:0},l._event={scrollStart:[],scroll:[],scrollEnd:[],refresh:[],touchEnd:[]},l.refresh(!0)},enable:function(){var t=this;return t.s.setAttribute("jroll-id",t.id),t},disable:function(){var t=this;return t.s.removeAttribute("jroll-id"),t},refresh:function(e){var r,l,n,s,i=this,c=t.getComputedStyle(i.w),a=t.getComputedStyle(i.s);return i.o.scrollX?(r=parseInt(c["padding-left"])+parseInt(c["padding-right"]),l=parseInt(a["margin-left"])+parseInt(a["margin-right"]),i.minScroll=null===i.o.min?0:i.o.min,i.maxScroll=null===i.o.max?i.w.clientWidth-i.s.offsetWidth-r-l:i.o.max):(r=parseInt(c["padding-top"])+parseInt(c["padding-bottom"]),l=parseInt(a["margin-top"])+parseInt(a["margin-bottom"]),i.minScroll=null===i.o.min?0:i.o.min,i.maxScroll=null===i.o.max?i.w.clientHeight-i.s.offsetHeight-r-l:i.o.max),i.minScroll<0&&(i.minScroll=0),i.maxScroll>0&&(i.maxScroll=0),i._s.end=i.y,i.o.scrollBar?(i.scrollBar||(n=i._createScrollBar("jroll-bar","jroll-btn"),i.scrollBar=n[0],i.scrollBtn=n[1]),i.scrollBarScale=i.o.scrollX?i.w.clientWidth/i.s.offsetWidth:i.w.clientHeight/i.s.offsetHeight,s=o.round((i.o.scrollX?i.w.clientWidth:i.scrollBar.clientHeight)*i.scrollBarScale),i.scrollBtn.style[i.o.scrollX?"width":"height"]=(s>8?s:8)+"px",i._runScrollBar()):i.scrollBar&&(i.w.removeChild(i.scrollBar),i.scrollBar=null),e||i._execEvent("refresh"),i},_runScrollBar:function(){var t=this,e=o.round(-1*t.y*t.scrollBarScale);t._scrollTo.call({scroller:t.scrollBtn,options:{scrollX:t.o.scrollX}},e)},_createScrollBar:function(t,o){var r,l,n=this;return r=e.createElement("div"),l=e.createElement("div"),r.className=t,l.className=o,this.options.scrollBar===!0&&(n.o.scrollX?(r.style.cssText="position:absolute;left:2px;bottom:2px;right:2px;height:6px;overflow:hidden;border-radius:2px;-webkit-transform: scaleY(.5);transform: scaleY(.5);",l.style.cssText="background:rgba(0,0,0,.4);height:100%;position:absolute;left:0;top:0;bottom:0;border-radius:2px;"):(r.style.cssText="position:absolute;top:2px;right:2px;bottom:2px;width:6px;overflow:hidden;border-radius:2px;-webkit-transform: scaleX(.5);transform: scaleX(.5);",l.style.cssText="background:rgba(0,0,0,.4);position:absolute;top:0;left:0;right:0;border-radius:2px;")),n.o.scrollBarFade&&(r.style.opacity=0),r.appendChild(l),n.w.appendChild(r),[r,l]},_fade:function(t,e){var o=this;o.fading&&e>0&&(e-=25,e%100===0&&(t.style.opacity=e/1e3),a(o._fade.bind(o,t,e)))},on:function(t,e){var o=this;switch(t){case"scrollStart":o._event.scrollStart.push(e);break;case"scroll":o._event.scroll.push(e);break;case"scrollEnd":o._event.scrollEnd.push(e);break;case"refresh":o._event.refresh.push(e);break;case"touchEnd":o._event.touchEnd.push(e)}return o},_execEvent:function(t,e){for(var o=this,r=o._event[t].length-1;r>=0;r--)o._event[t][r].call(o,e)},_compute:function(t,e,r){var l=this;return t>e?l.o.bounce&&t>e+10?o.round(e+(t-e)/4):e:t<r?l.o.bounce&&t<r-10?o.round(r+(t-r)/4):r:t},_scrollTo:function(t){this.scroller.style[p.TSF]=this.options.scrollX?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px, "+t+"px, 0px)"},scrollTo:function(t,e,o,r,l,n){var s=this,i=s.o.scrollX;return o?s.y=t:t>=s.minScroll?(s.y=s.minScroll,n&&(s._s.start=i?n[0].pageX:n[0].pageY,s._s.end=s.minScroll)):t<=s.maxScroll?(s.y=s.maxScroll,n&&(s._s.start=i?n[0].pageX:n[0].pageY,s._s.end=s.maxScroll)):s.y=t,l||(s._s.end=s.y),e?p.moveTo(s.s,i?s.y:0,i?0:s.y,e,r):(s._scrollTo(s.y),"function"==typeof r&&r()),s.scrollBtn&&s._runScrollBar(),s},_endAction:function(){var t=this;t._s.end=t.y,t.moving=!1,t.o.scrollBarFade&&!t.fading&&(t.fading=!0,t.scrollBar&&t._fade(t.scrollBar,2e3)),t._execEvent("scrollEnd")},_stepBounce:function(){function t(){e.scrollTo(e.y,300)}var e=this;e.bouncing=!1,1===e.direction?(e.scrollTo(e.minScroll+15,100,!0,t),e.y=e.minScroll):(e.scrollTo(e.maxScroll-15,100,!0,t),e.y=e.maxScroll)},_y:function(t){var e=this,o=e.direction*t;isNaN(o)||(e.y=e.y+o,(e.y>=e.minScroll||e.y<=e.maxScroll)&&(e.moving=!1,e.o.bounce&&(e.bouncing=!0)))},_step:function(t){var e=this,r=Date.now(),l=r-t,n=0;if(e.bouncing&&e._stepBounce(),!e.moving)return void e._endAction();if(l>10){if(e.speed=e.speed-l*(e.speed>1.2?.001:e.speed>.6?8e-4:6e-4),n=o.round(e.speed*l),e.speed<=0||n<=0)return void e._endAction();t=r,e._y(n),e.scrollTo(e.y,0,!1,null,!0),e._execEvent("scroll")}a(e._step.bind(e,t))},_doScroll:function(t,e){var o=this;o.distance=t,o.o.bounce&&(o.y=o._compute(o.y,o.minScroll,o.maxScroll)),o.scrollTo(o.y,0,o.o.bounce,null,!0,e.touches),o._execEvent("scroll",e)},_start:function(t){var e=this,o=t.touches;e.distance=0,e.lastMoveTime=e.startTime=Date.now(),e._s.last=e.startPosition=e._s.start=e.o.scrollX?o[0].pageX:o[0].pageY,e._execEvent("scrollStart",t)},_move:function(t){var e,o,r,l,n=this,s=t.touches||[t],i=1;o=n.o.scrollX?s[0].pageX:s[0].pageY,r=o-n._s.last,n._s.last=o,i=r>=0?1:-1,e=Date.now(),(e-n.lastMoveTime>200||n.direction!==i)&&(n.startTime=e,n.startPosition=o,n.direction=i),n.lastMoveTime=e,l=o-n.startPosition,n.o.scrollBarFade&&(n.fading=!1,n.scrollBar&&(n.scrollBar.style.opacity=1)),n.y=o-n._s.start+n._s.end,n._doScroll(l,t)},_end:function(t){var e=this,r=Date.now();t.touches&&t.touches.length||(e._execEvent("touchEnd"),c.jrollActive=null,e.duration=r-e.startTime,e.y>e.minScroll||e.y<e.maxScroll?e.scrollTo(e.y,300)._endAction():e.o.momentum&&e.duration<200&&e.distance?(e.speed=o.abs(e.distance/e.duration),e.speed=e.speed>2?2:e.speed,e.moving=!0,a(e._step.bind(e,r))):e._endAction(),e.o.scrollBarFade&&!e.fading&&(e.fading=!0,e.scrollBar&&e._fade(e.scrollBar,2e3)))}},"undefined"!=typeof module&&module.exports&&(module.exports=c),"function"==typeof define&&define(function(){return c}),t.JRoll=c}(window,document,Math);